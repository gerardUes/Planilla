<div class="row">
    <div class="col-xl-12 text-xs-center">
        <button type="button" class="btn btn-outline-primary" (click)="irFormularioPlanilla()">
            <i class="fa fa-plus form-control-feedback"></i> &nbsp;Nuevo Registro
        </button>
        <button *ngIf="verResumenPlanilla" type="button" class="btn btn-outline-primary ml-3"  (click)="resetPantalla()">
            <i class="fa fa-plus form-control-feedback"></i> &nbsp;Listado
        </button>

        <button *ngIf="verResumenPlanilla" type="button" class="btn btn-outline-primary ml-3"  (click)="irEditar()">
            <i class="fa fa-plus form-control-feedback"></i> &nbsp;Editar
        </button>

    </div>
</div>

<div class="row my-2" *ngIf="!verResumenPlanilla && !flagEditar">
    <div class="col-xl-3 text-xs-center">
        <label><strong>A単o:</strong></label>
        <input class="form-control" [(ngModel)]="anioConsulta" />
    </div>

    <div class="col-xl-3 text-xs-center">
        <label><strong>Mes:</strong></label>
        <select class="form-control" [(ngModel)]="mesConsulta" >
            <option [value]="mes.valor" *ngFor="let mes of meses">{{mes.mes}}</option>
        </select>

    </div>

    <div class="col-xl-6 text-xs-center">
        <button class="btn btn-outline-primary my-4" (click)="filtroPantalla()">
        Buscar&nbsp;<i class="fa fa-search" aria-hidden="true"></i>
        </button>
    </div>

    <div class="col-xl-12 text-xs-center my-1">
        <div class="card mb-3">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table">
                        <thead style="background-color: blue;color: white;">
                            <tr>
                              <th>Planilla</th>
                              <th># Planilla</th>
                              <th>A単o</th>
                              <th>Mes</th>
                              <th>Fecha Inicial</th>
                              <th>Fecha Final</th>
                              <th>Estado</th>

                            </tr>
                          </thead>
                          <!---(click)="open(content)"-->
                          <tbody>
                            <tr *ngFor="let planilla of listadoPlanilla" (click)="verDetalle(planilla)"   >
                                <td>
                                {{planilla.tiposPlanilla.nomTipopla}}
                                </td>
                                <td>
                                    {{planilla.numPlanilla}}
                                </td>
                                <td>
                                    {{planilla.anio}}
                                </td>
                                <td>
                                    {{planilla.mes}}
                                </td>
                                <td>
                                    {{planilla.fechaInicial}}
                                </td>
                                <td>
                                    {{planilla.fechaFinal}}
                                </td>

                                <td>

                                    <span *ngIf="planilla.status=='G'">Generada</span>
                                    <span *ngIf="planilla.status=='C'">Cerrada</span>

                                </td>


                            </tr>
                          </tbody>
                    </table>
                  </div>
            </div>
        </div>
    </div>
</div>






<div class="row my-2 col-xl-12 text-xs-center" *ngIf="verResumenPlanilla && !flagEditar" style="border-radius: 10px;background-color:white">
    <div class="card mb-3" style="background-color: white;">
        <div class="card-header" style="background-color: blue;color: white;" >
            <h5>Planilla</h5>
        </div>
        <div class="card-body">
            <div class="row" style="border-radius: 20px;background-color:white;color: black;">
                <div class="col-xs-4 col-sm-4">
                    <h6><strong>Planilla:</strong> {{servicio.objetoPlanillaServicio.tiposPlanilla.nomTipopla}} </h6>
                </div>
                <div class="col-xs-4 col-sm-4">
                    <h6><strong>A単o:</strong> {{servicio.objetoPlanillaServicio.anio}} </h6>
                </div>
                <div class="col-xs-4 col-sm-4">
                    <h6><strong>A単o:</strong> {{servicio.objetoPlanillaServicio.anio}} </h6>
                </div>
                <div class="col-xs-4 col-sm-4">
                    <h6><strong>Mes:</strong> {{servicio.objetoPlanillaServicio.mes}} </h6>
                </div>
                <div class="col-xs-4 col-sm-4">
                    <h6><strong>Numero:</strong> {{servicio.objetoPlanillaServicio.numPlanilla}} </h6>
                </div>
                <div class="col-xs-4 col-sm-4">
                    <h6><strong>Periodo:</strong> {{servicio.objetoPlanillaServicio.quincena}} </h6>
                </div>
                <div class="col-xs-4 col-sm-4">
                    <h6><strong>Fecha Inicio:</strong> {{servicio.objetoPlanillaServicio.fechaInicial}} </h6>
                </div>
                <div class="col-xs-4 col-sm-4">
                    <h6><strong>Fecha Fin:</strong> {{servicio.objetoPlanillaServicio.fechaFinal}} </h6>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row my-2 col-xl-12 text-xs-center" *ngIf="verResumenPlanilla && !flagEditar ">
    <div class="col-xl-6 text-xs-center">
        <div class="card mb-2">
            <div class="card-header" style="background-color:blue;color: white;" >
                <h5>Resumen Planilla</h5>
            </div>
            <div class="card-body">
                <div class="row" style="background-color:blue;color: white;" *ngIf="objetoTotales">
                    <div class="col-xs-6 col-sm-6" style="border:1px solid black;">
                        <h5><strong>Ingresos</strong></h5>
                        <ul class="list-group" style="color: black;">
                            <li class="list-group-item d-flex justify-content-between align-items-center"><strong>Sueldo Bruto:</strong><p>{{objetoTotales.sueldoBase | currency }}</p></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center"><strong>Comisiones:</strong> <p>{{objetoTotales.comisiones | currency}}</p></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center "><strong>Prestaciones:</strong> <p>{{objetoTotales.prestaciones | currency}} </p></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center "><strong>Horas Extras:</strong> <p> {{objetoTotales.vhHora | currency}} </p> </li>
                          </ul>
                      <div class="my-2">
                            <h5><strong>Total  {{totalIngresos | currency}}</strong></h5>
                        </div>

                    </div>

                    <div class="col-xs-6 col-sm-6" style="border:1px solid black;">
                        <h5><strong>Egresos</strong></h5>
                        <ul class="list-group" style="color: black;">
                            <li class="list-group-item d-flex justify-content-between align-items-center"><strong>Deducciones:</strong><p>{{objetoTotales.deducciones | currency}}</p></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center"><strong>Liquido:</strong><p>{{objetoTotales.liqRecibir | currency}}</p></li>
                        </ul>
                        <div class="mb-3">
                            <h5><strong>Total  {{totalEgresos | currency}}</strong></h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

     <div class="col-xl-6">

        <div class="card">
            <div class="card-header" style="background-color:blue;color: white;"  >
                <h5>Deducciones/Prestaciones</h5>
            </div>
            <div class="card-body">

                <table class="table table-hover">
                    <thead style="background-color: blue;color: white;">
                      <tr>
                        <th scope="col">Cantidad</th>
                        <th scope="col">Cod dp</th>
                        <th scope="col">Descripcion</th>
                        <th scope="col">Monto</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of listaResumen" >
                        <th scope="row">{{item.cantidad}}</th>
                        <td>{{item.codDp}}</td>
                        <td>{{item.descripcion}}</td>
                        <td>{{item.monto | currency }}</td>
                      </tr>
                    </tbody>
                  </table>


            </div>
          </div>



     </div>

</div>

<div class="row my-2" *ngIf="verResumenPlanilla && !flagEditar">
    <div class="col-xl-12 text-xs-center">
        <div class="card mb-3">
            <div class="card-header" style="background-color:blue;color: white;">
                <h5>Horas extras</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                          <tr>
                            <th scope="col">cod emp</th>
                            <th scope="col">Nombre</th>
                            <th scope="col">Simples</th>
                            <th scope="col">Dobles</th>
                            <th scope="col">Medica simple</th>
                            <th scope="col">Medica doble</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let item of listaHorasExtras">
                            <th scope="row">{{item.empleados.empleadosPK.codEmp}}</th>
                            <td>{{item.empleados.nombres}} {{item.empleados.apellidos}}</td>
                            <td style="text-align: right;">{{item.vhXsencilla | currency }}</td>
                            <td style="text-align: right;" >{{item.vhXdoble | currency }}</td>
                            <td style="text-align: right;" >{{item.vhX150 | currency}}</td>
                            <td style="text-align: right;" >{{item.vhX250 | currency }}</td>
                          </tr>

                        </tbody>
                      </table>
                </div>
            </div>
        </div>
    </div>
</div>


<app-editar-planilla [mostrarFormEdicion]="flagEditar"></app-editar-planilla>






<ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">Resumen Asistencia</h4>
        <button (click)="d('Cross click')" aria-label="Close" class="close" type="button">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">

        <div class="table-responsive">
            <table class="table table-hover">
                <thead style="background-color: blue;color: white;">
                  <tr>
                    <th scope="col">Cantidad</th>
                    <th scope="col">Cod dp</th>
                    <th scope="col">Descripcion</th>
                    <th scope="col">Monto</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of listaResumen" >
                    <th scope="row">{{item.cantidad}}</th>
                    <td>{{item.codDp}}</td>
                    <td>{{item.descripcion}}</td>
                    <td>{{item.monto | currency }}</td>
                  </tr>
                </tbody>
              </table>
          </div>


    </div>
    <div class="modal-footer">
        <button (click)="c('Close click')" class="btn btn-secondary" type="button">Cerrar</button>
    </div>
</ng-template>
